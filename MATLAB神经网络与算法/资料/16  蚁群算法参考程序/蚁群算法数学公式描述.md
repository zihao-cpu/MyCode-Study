# 蚁群算法数学公式描述

## 1. 初始化蚂蚁的起点
每只蚂蚁的起点是随机选取的。

对于每只蚂蚁 \( i \)，从 \( n \) 个城市中随机选择一个起点 \( s_i \)，即：


$$
s_i \in \{1, 2, \dots, n\}
$$



## 2. 路径选择：蚂蚁从当前城市选择下一个城市
蚂蚁的路径选择是基于信息素和启发函数的概率模型。蚂蚁从城市 \( j \) 选择下一个城市 \( k \) 的转移概率 \( P_{jk} \) 定义为：
$$
P_{jk} = \frac{\tau_{jk}^{\alpha} \eta_{jk}^{\beta}}{\sum_{l \in \text{allowed}} \tau_{jl}^{\alpha} \eta_{jl}^{\beta}}
$$

其中：
$$
tau_{jk} 是城市 j  到城市 k  的信息素值。
$$

$$
\eta{jk} = \frac{1}{D{jk}}    D_{jk}  是城市 j  和城市 k 之间的距离。
$$

$$
\eta{jk} = \frac{1}{D{jk}} 是启发函数  D_{jk} 是城市 ( j ) 和城市 ( k ) 之间的距离。\\ 
\alpha  和 \beta分别是控制信息素和启发函数的重要性因子。\text{allowed}  是尚未访问过的城市集合。
$$

### 轮盘赌选择：


$$
在选择下一个城市时，蚂蚁根据上述概率进行选择，使用轮盘赌法。\\设 ( P = {P_{jk}} ) 是当前城市 ( j ) 到所有未访问城市的概率向量，\\蚂蚁选择的下一个城市 ( k ) 的索引可以表示为\\：

k = \text{arg} \min \left( \text{cumsum}(P) \geq \text{rand} \right) \\

其中 cumsum(P) 是 ( P ) 的累积和，rand 是一个随机数，\\选择第一个满足条件的城市作为下一个目标城市
$$


## 3. 计算蚂蚁的路径长度

$$
每只蚂蚁 i 的路径长度L_i 是它从城市 1 到城市 ( n ) 的旅行距离总和，路径长度计算公式为：\\
L_i = \sum_{j=1}^{n-1}  D_{R_i(j), R_i(j+1)} + D_{R_i(n), R_i(1)}\\
其中，R_i(j)是蚂蚁 i  的第 j  个访问的城市， D_{m,n}  是城市  m  和城市  n  之间的距离。
$$



## 4. 更新信息素
信息素的更新是根据蚂蚁的路径长度进行的。每次蚂蚁行走后，路径上的信息素会增加，而信息素的挥发会使路径上的信息素逐渐减少。信息素的更新规则如下：
$$
信息素的挥发：\\
\tau{jk} \leftarrow (1 - \rho) \cdot \tau{jk}\\
其中 ( \rho ) 是信息素挥发因子。\\

信息素的增加：\\
\Delta \tau_{jk} = \sum_{i=1}^{m} \frac{Q}{L_i} \cdot \mathbb{I}_{R_i(j) = j \text{ and } R_i(k) = k}
其中：\\
 \mathbb{I}  是指示函数，表示如果蚂蚁 ( i ) 的路径上有城市 ( j ) 到城市 ( k )，则值为 1，否则为 0。\\
Q是常系数，通常设为 1。\\
 L_i 是蚂蚁  i  的路径长度。\\

最终的信息素更新：\\
\tau{jk} \leftarrow (1 - \rho) \cdot \tau{jk} + \Delta \tau_{jk}
$$


## 5. 记录和更新最优路径

$$
每次迭代中，我们会检查所有蚂蚁的路径长度，并记录当前迭代中的最短路径和最长路径。\\

最短路径长度：\\
L_{\text{best}} = \min(L_1, L_2, \dots, L_m)\\
更新最优路径：\\
R{\text{best}} = R_i \quad \text{if } L_i = L{\text{best}}
$$

## 6. 终止条件

$$
当迭代次数达到设定的最大值 ( iter_{\text{max}} ) 时，算法终止。
$$

